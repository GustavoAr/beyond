
<!--
/************************
MODULE: controls/pulldown
*************************
-->

/********************
CONTROL DEPENDENCIES
********************/

<script>
    (function (params) {

        var module = params[0];
        module.dependencies.set({"require":{"react":"React","react-dom":"ReactDOM"}});

    })(beyond.modules.get('application/controls/pulldown'));

</script>


<dom-module id="beyond-pulldown-control">

    /**********************
    TEMPLATE STYLES (LESS)
    **********************/

    <style>
    </style>

    <script>
        (function (params) {

            var done = params[1];
            var module = params[0];
            var dependencies = module.dependencies.modules;
            var react = module.react.items;


            /*****************
             FILE NAME: sna.js
             *****************/

            function SNA() {
                "use strict";

                var events = new Events({'bind': this});

                var state = {
                    'progress': 0,
                    'professionals': [
                        {
                            'id': 0,
                            'name': 'Gregory House',
                            'title': 'Department of Diagnostic Medicine'
                        },
                        {
                            'id': 1,
                            'name': 'Meredith Grey',
                            'title': 'Head of General Surgery'
                        }
                    ]
                };
                Object.defineProperty(this, 'state', {
                    'get': function () {
                        return state;
                    }
                });

                var actions = {
                    'increment': function () {
                        state.progress++;
                        events.trigger('change');
                    },
                    'deleteProfessional': function (id) {
                        for (var i in state.professionals) {
                            var professional = state.professionals[i];
                            if (professional.id === id) {
                                state.professionals.splice(i, 1);
                                events.trigger('change');
                            }
                        }
                    }
                };
                Object.defineProperty(this, 'actions', {
                    'get': function () {
                        return actions;
                    }
                });

            }


            /**********************
             FILE NAME: register.js
             **********************/

            (function () {
                "use strict";

                function ExampleBehavior() {

                    var control;

                    this.created = function () {
                        control = this;
                    };

                    this.setCoolAttribute = function (value) {
                        console.log('cool attribute is set', value);
                    };

                    this.properties = {
                        'coolAttribute': {
                            'type': String,
                            'observer': 'setCoolAttribute'
                        }
                    };

                }

                module.polymer.define('PullDown', {
                    'create': function () {

                        var sna = new SNA();

                        var List = react.list;
                        return module.React.createElement(List, {'sna': sna});

                    },
                    'behaviors': [new ExampleBehavior]
                });

            })();



        })(beyond.modules.get('application/controls/pulldown'));
    </script>

    <script>
        (function (params) {

            var done = params[1];
            var module = params[0];
            var dependencies = module.dependencies.modules;
            var react = module.react.items;

            var jsxExportFnc;

            /***************************
             FILE NAME: professional.jsx
             ***************************/

            jsxExportFnc = function () {

                var React = module.React;
                var exports;

                exports = React.createClass({
                    displayName: 'exports',

                    'deleteProfessional': function () {
                        "use strict";

                        var actions = this.props.actions;
                        var state = this.props.state;

                        actions.deleteProfessional(state.id);
                    },
                    'render': function () {
                        "use strict";

                        var state = this.props.state;

                        return React.createElement(
                            'div',
                            { className: 'professional' },
                            React.createElement(
                                'div',
                                { className: 'name' },
                                state.name
                            ),
                            React.createElement(
                                'paper-button',
                                {
                                    className: 'delete',
                                    onClick: this.deleteProfessional },
                                'delete'
                            )
                        );
                    }
                });

                return exports;

            };

            module.react.register('professional', jsxExportFnc);

            /*******************
             FILE NAME: list.jsx
             *******************/

            jsxExportFnc = function () {

                var React = module.React;
                var exports;

                exports = module.react.createControl({
                    'navigateStatic': function () {
                        "use strict";

                        beyond.navigate('/static');
                    },
                    'render': function (state, actions, control) {
                        "use strict";

                        var Professional = react.professional;

                        return React.createElement(
                            'div',
                            { className: 'professionals-list' },
                            state.professionals.map(function (professional) {
                                return React.createElement(Professional, {
                                    key: professional.id,
                                    state: professional,
                                    actions: actions });
                            }),
                            React.createElement(
                                'div',
                                { className: 'progress' },
                                state.progress
                            ),
                            React.createElement(
                                'paper-button',
                                { onClick: actions.increment },
                                'Increment'
                            ),
                            React.createElement(
                                'paper-button',
                                { onClick: this.navigateStatic },
                                'Navigate Static'
                            )
                        );
                    }
                });

                return exports;

            };

            module.react.register('list', jsxExportFnc);


        })(beyond.modules.get('application/controls/pulldown'));
    </script>


</dom-module>
